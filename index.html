<!DOCTYPE html>
<html>

<head>
    <title>Cheque Requisition Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <style>
        /* Additional custom styles */
        .logo {
            max-height: 50px;
            /* Adjust based on your logo's size */
        }

        .cell-des {
            width: 60%;
        }

        .cell-amt {
            width: 3cm;
        }

        .cell-amt input {
            text-align: right;
        }


        #mailingAddress {
            display: none;
            /* Initially hidden */
        }

        #crdApprovals {
            display: none;
        }


        @media print {
            .noprint {
                display: none;
            }

            @page {
                size: letter;
                margin: 2cm;
            }

            html,
            body {
                font-size: 10pt;
                background: #FFF;
                overflow: visible;
                padding: 0 !important;
                margin: 0 !important;
                width: 215mm !important;
            }

            .container {
                margin: 0 !important;
                padding: 0 !important;
                width: 215mm !important;
                max-width: 215mm !important;
            }

            .logo {
                max-width: 30vw;
                /* Adjust based on your logo's size */
            }

            #crdApprovals {
                display: block;
            }
        }
    </style>
</head>

<body>
    <div class="container py-5">
        <div class="row">
            <div class="col-auto">
                <img src="logo.png" alt="Logo" class="logo" />
            </div>
            <div class="col ms-4">
                <h2>Cheque requisition form</h2>
            </div>
        </div>
        <form id="requisitionForm" class="my-5">
            <div class="row">
                <div class="col-auto">
                    <h4>Expense details</h4>
                </div>
                <div class="col">
                    <button type="button" class="btn btn-sm btn-primary add-item-button noprint m-0"><svg
                            xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-plus-square me-2" viewBox="0 0 16 16">
                            <path
                                d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z" />
                            <path
                                d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4" />
                        </svg>Add Item</button>
                </div>
            </div>

            <table class="table" id="itemsTable">
                <thead>
                    <tr>
                        <th>Item description</th>
                        <th>Accounting distribution</th>
                        <th>Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Rows will be added here dynamically -->
                </tbody>
            </table>


            <div class="card p-3 mt-5">
                <h4 class="">Payment details</h4>
                <div class="row">
                    <div class="col-6">
                        <label for="payeeName" class="form-label">Payee Name</label>
                        <input type="text" class="form-control" id="payeeName" required>
                    </div>
                    <div class="col-3">
                        <label for="totalAmount" class="form-label">Total Amount</label>
                        <input type="text" class="form-control" id="totalAmount" readonly>
                    </div>
                    <div class="col-3">
                        <label for="dateRequired" class="form-label">Date Required</label>
                        <input type="date" class="form-control" id="dateRequired" required>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col">
                        <label class="fw-bold">Cheque distribution:</label>
                        <div class="ms-5 form-check d-inline-block">
                            <input type="radio" name="cdist" value="give" class="form-check-input" id="giveToPayee">
                            <label class="form-check-label" for="giveToPayee">Give to Payee (regular church
                                attendee)</label>
                        </div>
                        <div class="ms-5 form-check d-inline-block">
                            <input type="radio" name="cdist" value="mail" class="form-check-input" id="mail">
                            <label class="form-check-label" for="mail">Send by mail</label>
                        </div>
                    </div>
                    <div id="mailingAddress" class="col-12">
                        <label for="mailingAddressInput" class="form-label">Cheque Mailing Address</label>
                        <input type="text" class="form-control" id="mailingAddressInput">
                    </div>
                </div>
            </div>

            <div class="card p-3 mt-5" id="crdApprovals">
                <h4 class="">Approvals</h4>
                <div class="row">
                    <div class="col">
                        <label for="approvedBy" class="form-label">Request Approved By</label>
                        <input type="text" class="form-control" id="approvedBy">
                    </div>
                    <div class="col">
                        <label for="approvedBy" class="form-label">Approval Signature</label>
                        <input type="text" class="form-control" id="approvedBy">
                    </div>
                    <div class="col">
                        <label for="approvedDate" class="form-label">Approval Date (YYYY-MM-DD)</label>
                        <input type="text" class="form-control" id="approvedDate" readonly>
                    </div>
                </div>
            </div>

            <button type="submit" class="btn btn-success print-button noprint mt-5">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-printer me-2" viewBox="0 0 16 16">
                    <path d="M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1" />
                    <path
                        d="M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1" />
                </svg>
                Print Form
            </button>
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
    <script>
        $(document).ready(function () {
            $('.add-item-button').click(function () {
                $('#itemsTable tbody').append(`
            <tr>
                <td class="cell-des"><input type="text" class="form-control item-description"></td>
                <td class="cell-cat"><input type="text" class="form-control item-category"></td>
                <td class="cell-amt"><input type="number" class="form-control item-amount" step="0.01"></td>
            </tr>
        `);

            });

            $(document).on('input', '.item-amount', function () {
                let totalAmount = 0;
                $('.item-amount').each(function () {
                    let amount = parseFloat($(this).val()) || 0;
                    totalAmount += amount;
                });
                $('#totalAmount').val(totalAmount.toFixed(2));
            });

            $('input[name="cdist"]').change(function () {
                if ($('input[name="cdist"]:checked').val() == 'mail') {
                    $('#mailingAddress').show();
                } else {
                    $('#mailingAddress').hide();
                }
            });

            $('#requisitionForm').submit(function (e) {
                e.preventDefault(); // Prevent actual form submission
                window.print(); // Trigger the print dialog
            });

            // Get the current date
            let currentDate = new Date();

            // Get the current day of the week (0 for Sunday, 1 for Monday, ..., 6 for Saturday)
            let currentDayOfWeek = currentDate.getDay();

            // Calculate the number of days until the next Sunday
            let daysUntilNextSunday = 7 - currentDayOfWeek;

            // Create a new Date object for the coming Sunday by adding the days until Sunday
            let comingSunday = new Date(currentDate);
            comingSunday.setDate(currentDate.getDate() + daysUntilNextSunday);
            let formattedSundayDate = comingSunday.getFullYear() + '-' + ('0' + (comingSunday.getMonth() + 1)).slice(-2) + '-' + ('0' + comingSunday.getDate()).slice(-2);

            $('#dateRequired').val(formattedSundayDate);
        });

    </script>
</body>

</html>